import sqlite3

# Función para crear la tabla de contactos
def create_table():
    conn = sqlite3.connect('contactos.db')
    c = conn.cursor()
    c.execute('''CREATE TABLE IF NOT EXISTS contactos
                 (id INTEGER PRIMARY KEY, nombre TEXT, telefono TEXT, email TEXT)''')
    conn.commit()
    conn.close()

# Función para insertar un nuevo contacto
def insert_contact(nombre, telefono, email):
    conn = sqlite3.connect('contactos.db')
    c = conn.cursor()
    c.execute("INSERT INTO contactos (nombre, telefono, email) VALUES (?, ?, ?)", (nombre, telefono, email))
    conn.commit()
    conn.close()

# Función para mostrar todos los contactos
def show_contacts():
    conn = sqlite3.connect('contactos.db')
    c = conn.cursor()
    c.execute("SELECT * FROM contactos")
    rows = c.fetchall()
    for row in rows:
        print(row)
    conn.close()

# Función para actualizar un contacto existente
def update_contact(id, nombre, telefono, email):
    conn = sqlite3.connect('contactos.db')
    c = conn.cursor()
    c.execute("UPDATE contactos SET nombre=?, telefono=?, email=? WHERE id=?", (nombre, telefono, email, id))
    conn.commit()
    conn.close()

# Función para eliminar un contacto
def delete_contact(id):
    conn = sqlite3.connect('contactos.db')
    c = conn.cursor()
    c.execute("DELETE FROM contactos WHERE id=?", (id,))
    conn.commit()
    conn.close()

# Función principal para ejecutar la aplicación de consola
def main():
    create_table()
    while True:
        print("\nSelecciona una opción:")
        print("1. Agregar contacto")
        print("2. Mostrar contactos")
        print("3. Actualizar contacto")
        print("4. Eliminar contacto")
        print("5. Salir")
        opcion = input("Opción: ")

        if opcion == "1":
            nombre = input("Nombre: ")
            telefono = input("Teléfono: ")
            email = input("Email: ")
            insert_contact(nombre, telefono, email)
            print("Contacto agregado exitosamente.")

        elif opcion == "2":
            print("\nListado de contactos:")
            show_contacts()

        elif opcion == "3":
            id = input("ID del contacto a actualizar: ")
            nombre = input("Nuevo nombre: ")
            telefono = input("Nuevo teléfono: ")
            email = input("Nuevo email: ")
            update_contact(id, nombre, telefono, email)
            print("Contacto actualizado exitosamente.")

        elif opcion == "4":
            id = input("ID del contacto a eliminar: ")
            delete_contact(id)
            print("Contacto eliminado exitosamente.")

        elif opcion == "5":
            print("¡Hasta luego!")
            break

        else:
            print("Opción inválida. Por favor, selecciona una opción válida.")

if __name__ == "__main__":
    main()
